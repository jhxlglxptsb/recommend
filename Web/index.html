<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.ico">

    <title>旅行路线推荐</title>



    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=9GqzBZjfGqXYXMzdfuRN9AL4B4PHaY6R"></script>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-grid.min.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <script src="http://cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script>
    <link href="http://cdn.bootcss.com/bootstrap-table/1.11.0/bootstrap-table.min.css" rel="stylesheet">
    <script src="http://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap-table/1.11.0/bootstrap-table.min.js"></script>


    <!-- Custom styles for this template -->
    <link href="dashboard.css" rel="stylesheet">

</head>

<body>
<nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">用户信息</a>
    <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
    <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
            <a class="nav-link" href="#">Sign out</a>
        </li>
    </ul>
</nav>

<div class="container-fluid">
    <div class="row", data-spy="scroll">
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">

            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <h5>用户名</h5>
                    <h5><span class="badge badge-pill badge-secondary">用户名</span></h5>
                    <h5>出行人数</h5>
                    <h5><span class="badge badge-pill badge-secondary">2</span></h5>
                    <h5>年龄</h5>
                    <div class="bd-example">
                        <h5><span class="badge badge-pill badge-secondary">20~30</span>
                        <!--span class="badge badge-pill badge-secondary">30~40</span--></h5>
                    </div>
                    <h5>性别</h5>
                    <div class="bd-example">
                        <h5><span class="badge badge-pill badge-secondary">男</span>
                            <span class="badge badge-pill badge-secondary">女</span></h5>
                    </div>
                    <div class="bd-example">
                        <h5>地理范围</h5>
                        <h5><span class="badge badge-pill badge-secondary">北京</span>
                            <span class="badge badge-pill badge-secondary">西安</span></h5>
                    </div>
                    <h5>出行时间</h5>
                    <div class="bd-example">
                        <h5><span class="badge badge-pill badge-secondary">2019-04-01</span>
                            <span class="badge badge-pill badge-secondary">2019-04-04</span></h5>
                    </div>
                    <h5>兴趣</h5>
                    <div class="bd-example">
                        <h5><span class="badge badge-pill badge-secondary">历史</span>
                            <span class="badge badge-pill badge-secondary">美食</span>
                            <span class="badge badge-pill badge-secondary">情侣</span></h5>
                    </div>
                    <h5>交通偏好</h5>
                    <div class="bd-example">
                        <h5><span class="badge badge-pill badge-secondary">高铁</span>
                            <span class="badge badge-pill badge-secondary">地铁</span>
                            <span class="badge badge-pill badge-secondary">公交</span>
                            <span class="badge badge-pill badge-secondary">步行</span></h5>
                    </div>
                    <h5>住宿偏好</h5>
                    <h5><span class="badge badge-pill badge-secondary">商务型</span></h5>

                    <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=3)" width="80%" color=#987cb9 SIZE=3>

                    <h3 class="mx-auto"><a href="welcome_page.html" class="badge badge-light">修改信息</a></h3>


                </ul>
            </div>
        </nav>

        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">旅行路线</h1>
                <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group mr-2">
                        <button class="btn btn-sm btn-outline-secondary">分享</button>
                        <button class="btn btn-sm btn-outline-secondary">保存</button>
                    </div>

                </div>
            </div>

            <script>
                function MymergeCells(data,fieldName,colspan,target){
                    //声明一个map计算相同属性值在data对象出现的次数和
                    var sortMap = {};
                    for(var i = 0 ; i < data.length ; i++){
                        for(var prop in data[i]){
                            if(prop == fieldName){
                                var key = data[i][prop]
                                if(sortMap.hasOwnProperty(key)){
                                    sortMap[key] = sortMap[key] * 1 + 1;
                                } else {
                                    sortMap[key] = 1;
                                }
                                break;
                            }
                        }
                    }
                    for(var prop in sortMap){
                        console.log(prop,sortMap[prop])
                    }
                    var index = 0;
                    for(var prop in sortMap){
                        var count = sortMap[prop] * 1;
                        $(target).bootstrapTable('mergeCells',{index:index, field:fieldName, colspan: colspan, rowspan: count});
                        index += count;
                    }
                }
            </script>

            <div class="row">
                <div id="map" style="width:600px;height:600px" ></div>
                <div class="col-md-5 col-sm-offset-5">
                    <table data-toggle="table"
                           data-pagination="true"
                           data-pagination-loop="false"
                           data-page-size="5"
                           data-page-list="[5,10,All]"
                           data-mobile-responsive="true"
                           data-show-export="true"
                           clickToSelect = "true"
                           data-url="./index.json"
                    >
                        <thead>
                        <!--注意: json文件中必须有一个名字为data的数组来保存数据-->
                        <tr>
                            <th data-field="date"
                                data-sortable="false"
                                data-width="100">日期</th>
                            <th data-field="time">时间</th>
                            <th data-field="addr"
                                data-editable="true">地点</th>
                            <th data-field="traffic"
                                data-editable="true">交通方式</th>
                        </tr>
                        </thead>
                    </table>
                </div>
            </div>


            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="80%" color=#987cb9 SIZE=10>
            <div id = "attractions">
            <h4 style="display: inline;">景点</h4>
                <div class="demo">
                    <div class="container">

                        <div class="row">
                            <div class="col-md-3 col-sm-5">
                                <div class="box">
                                    <div class="box-img">
                                        <img src="images/大雁塔.jpeg" alt="">
                                    </div>
                                    <div class="box-content">
                                        <h4 class="title">大雁塔</h4>
                                        <h5><a href="http://piao.ctrip.com/dest/u-_b4_f3_d1_e3_cb_fe/s-tickets/#ctm_ref=vat_hp_sb_lst" class="fa fa-qq">订票</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 col-sm-5">
                                <div class="box">
                                    <div class="box-img">
                                        <img src="images/大明宫.jpeg" alt="">
                                    </div>
                                    <div class="box-content">
                                        <h4 class="title">大明宫</h4>
                                        <h5><a href="http://piao.ctrip.com/dest/u-_b4_f3_d1_e3_cb_fe/s-tickets/#ctm_ref=vat_hp_sb_lst" class="fa fa-qq">订票</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 col-sm-5">
                                <div class="box">
                                    <div class="box-img">
                                        <img src="images/回民街.jpeg" alt="">
                                    </div>
                                    <div class="box-content">
                                        <h4 class="title">回民街</h4>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 col-sm-5">
                                <div class="box">
                                    <div class="box-img">
                                        <img src="images/兵马俑.jpeg" alt="">
                                    </div>
                                    <div class="box-content">
                                        <h4 class="title">兵马俑</h4>
                                        <h5><a href="http://piao.ctrip.com/dest/u-_b4_f3_d1_e3_cb_fe/s-tickets/#ctm_ref=vat_hp_sb_lst" class="fa fa-qq">订票</a></h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=3)" width="80%" color=#987cb9 SIZE=3>

            <div id = "shelter">
                <h4 style="display: inline;">住宿</h4>
                <div class="demo">
                    <div class="container">

                        <div class="row">
                            <div class="col-md-3 col-sm-5">
                                <div class="box">
                                    <div class="box-img">
                                        <img src="images/星华宫酒店.jpeg" alt="">
                                    </div>
                                    <div class="box-content">
                                        <h4 class="title">星华宫酒店</h4>
                                        <h5><a href="http://hotels.ctrip.com/hotel/13926364.html#ctm_ref=hod_hp_sb_lst" class="fa fa-qq">预定</a></h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=3)" width="80%" color=#987cb9 SIZE=3>

            <div id = "traffic">
            <h4 style="display: inline;">交通</h4>
                <div class="demo">
                    <div class="container">

                        <div class="row">
                            <div class="col-md-3 col-sm-5">
                                <div class="box">
                                    <div class="box-img">
                                        <img src="images/高铁.jpeg" alt="">
                                    </div>
                                    <div class="box-content">
                                        <h4 class="title">北京西->西安北</h4>
                                        <h5>2019.04.01</h5>
                                        <h5><a href="http://hotels.ctrip.com/hotel/13926364.html#ctm_ref=hod_hp_sb_lst" class="fa fa-qq">订票</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 col-sm-5">
                                <div class="box">
                                    <div class="box-img">
                                        <img src="images/飞机.jpeg" alt="">
                                    </div>
                                    <div class="box-content">
                                        <h4 class="title">西安->北京</h4>
                                        <h5>2019.04.04</h5>
                                        <h5><a href="http://hotels.ctrip.com/hotel/13926364.html#ctm_ref=hod_hp_sb_lst" class="fa fa-qq">订票</a></h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=3)" width="80%" color=#987cb9 SIZE=3>


        </main>
    </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="../../../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<script src="../../../../assets/js/vendor/popper.min.js"></script>
<script src="../../../../dist/js/bootstrap.min.js"></script>

<!-- Icons -->
<script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
<script>
    feather.replace()
</script>


<script>
    var map = new BMap.Map("map",{minZoom:5,maxZoom:18,enableMapClick:false});
    var point = new BMap.Point(116.404, 39.915);
    map.centerAndZoom(point,12);

    map.enableDragging();
    map.enableScrollWheelZoom();
    map.disableDoubleClickZoom();
    var ctrlNav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});
    map.addControl(ctrlNav);
    map.setMapStyle({style:"light"});

    /*
    var myGeo = new BMap.Geocoder();
    // 将地址解析结果显示在地图上,并调整地图视野
    var address = new Array("西安北站","古城墙");
    var city = "西安市";
    var geoCoord={};
    map.centerAndZoom(city,12);

    for(j = 0; j < address.length; j++) {
        myGeo.getPoint(address[j], function(address, point){
            if (point) {
                marker = new BMap.Marker(point);
                map.addOverlay(marker);
            }
        }, city);
    }

    var driving = new BMap.DrivingRoute(map);    //创建驾车实例
    for(j = 0; j < address.length-1; j++) {
        driving.search(address[j], address[j+1]);
    }
    driving.setSearchCompleteCallback(function(){
        var pts = driving.getResults().getPlan(0).getRoute(0).getPath();    //通过驾车实例，获得一系列点的数组
        var polyline = new BMap.Polyline(pts);
        map.addOverlay(polyline);
    });


*/
    var myP1 = new BMap.Point(108.959248,34.373588);  //星华宫酒店
    var myP2 = new BMap.Point(108.953318,34.258243);  //古城墙
    var myP3 = new BMap.Point(108.944934,34.382293);  //西安北站
    var myP4 = new BMap.Point(108.950249,34.266723);  //回民街

    var pointsArray = new Array(myP3, myP1, myP2, myP4, myP1);
    var addressArray = new Array("星华宫酒店", "古城墙", "西安北站", "回民街");

    for(j = 0; j < pointsArray.length; j++) {
        marker = new BMap.Marker(pointsArray [j]);
        map.addOverlay(marker);
    }

    var driving = new BMap.DrivingRoute(map);    //创建驾车实例
    for(j = 0; j < pointsArray.length-1; j++) {
        driving.search(pointsArray[j], pointsArray[j+1]);
    }
    driving.setSearchCompleteCallback(function(){
        var pts = driving.getResults().getPlan(0).getRoute(0).getPath();    //通过驾车实例，获得一系列点的数组
        var polyline = new BMap.Polyline(pts, {strokeColor:"black", strokeWeight:6, strokeOpacity:0.8});
        map.addOverlay(polyline);
    });

    map.setViewport([myP1, myP2, myP3, myP4]);          //调整到最佳视野

</script>

</body>
</html>